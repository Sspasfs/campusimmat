<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_front_2inventory_8php" xml:lang="fr">
<title>Référence du fichier public/glpi/front/inventory.php</title>
<indexterm><primary>public/glpi/front/inventory.php</primary></indexterm>
<simplesect>
    <title>Variables    </title>
        <itemizedlist>
            <listitem><para><link linkend="_front_2inventory_8php_1a803992d20070f8b025dcc9ea32ff1ebb">$SECURITY_STRATEGY</link> = &apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">no_check</link>&apos;</para>
</listitem>
            <listitem><para><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link>(!defined(&apos;<link linkend="_apirest_8php_1af6315dcee605fda09b6c3109c1b739b1">GLPI_ROOT</link>&apos;)) <link linkend="_front_2inventory_8php_1ace4516eb6f79482196ac479d19dcccb5">$conf</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_glpi_1_1_inventory_1_1_conf">Conf</link>()</para>
</listitem>
            <listitem><para><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link>($<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">conf</link>-&gt;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">enabled_inventory</link> !=1) <link linkend="_front_2inventory_8php_1a1e3a0fd801ce604f589c6170c4081334">$inventory_request</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_glpi_1_1_inventory_1_1_request">Request</link>()</para>
</listitem>
            <listitem><para><link linkend="_front_2inventory_8php_1acea7b93e98a2b649bfc9de2524b3f955">$refused</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_refused_equipment">RefusedEquipment</link>()</para>
</listitem>
            <listitem><para><link linkend="_front_2inventory_8php_1ad86c3fbc5672e1deeafc5229012b0b5d">$handle</link> = true</para>
</listitem>
            <listitem><para><link linkend="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb">$contents</link> = &apos;&apos;</para>
</listitem>
            <listitem><para><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link>(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">isset</link>( $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">_GET</link>[ &apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">refused</link>&apos;])) else <link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link>(!<link linkend="_autoload_8function_8php_1ab4e318ad07e38b1cd122362832786aca">isCommandLine</link>() &amp;&amp; $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">_SERVER</link>[&apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">REQUEST_METHOD</link>&apos;] !=&apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">POST</link>&apos;) <link linkend="_front_2inventory_8php_1a3f1c5efa7b3f3b3f9f5d11a4b3b38635">else</link></para>
</listitem>
            <listitem><para><link linkend="_front_2inventory_8php_1afe9a9d2c579c635ef306b98960a32846">foreach</link> ( $headers <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">as</link> $key=&gt; $value)</para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Documentation des variables</title>
<anchor xml:id="_front_2inventory_8php_1ace4516eb6f79482196ac479d19dcccb5"/><section>
    <title>$conf</title>
<indexterm><primary>$conf</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$conf</secondary></indexterm>
<para><computeroutput><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link> (!defined( &apos;<link linkend="_apirest_8php_1af6315dcee605fda09b6c3109c1b739b1">GLPI_ROOT</link>&apos;)) $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">conf</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_glpi_1_1_inventory_1_1_conf">Conf</link>()</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb"/><section>
    <title>$contents</title>
<indexterm><primary>$contents</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$contents</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">contents</link> = &apos;&apos;</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1ad86c3fbc5672e1deeafc5229012b0b5d"/><section>
    <title>$handle</title>
<indexterm><primary>$handle</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$handle</secondary></indexterm>
<para><computeroutput>$handle = true</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1a1e3a0fd801ce604f589c6170c4081334"/><section>
    <title>$inventory_request</title>
<indexterm><primary>$inventory_request</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$inventory_request</secondary></indexterm>
<para><computeroutput><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link> ( $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">conf</link>-&gt;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">enabled_inventory</link> !=1) $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">inventory_request</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_glpi_1_1_inventory_1_1_request">Request</link>()</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1acea7b93e98a2b649bfc9de2524b3f955"/><section>
    <title>$refused</title>
<indexterm><primary>$refused</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$refused</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">refused</link> = <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">new</link> <link linkend="_class_refused_equipment">RefusedEquipment</link>()</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1a803992d20070f8b025dcc9ea32ff1ebb"/><section>
    <title>$SECURITY_STRATEGY</title>
<indexterm><primary>$SECURITY_STRATEGY</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>$SECURITY_STRATEGY</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">SECURITY_STRATEGY</link> = &apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">no_check</link>&apos;</computeroutput></para></section>
<anchor xml:id="_front_2inventory_8php_1a3f1c5efa7b3f3b3f9f5d11a4b3b38635"/><section>
    <title>else</title>
<indexterm><primary>else</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>else</secondary></indexterm>
<para><computeroutput><link linkend="_dropdown_location_8php_1a52332c22f84432520971794825a5a8e7">if</link> (<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">isset</link>( $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">_GET</link>[ &apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">refused</link>&apos;])) else</computeroutput></para><emphasis role="strong">Valeur initiale :</emphasis><programlisting linenumbering="unnumbered">{
&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_autoload_8function_8php_1ab4e318ad07e38b1cd122362832786aca">isCommandLine</link>())&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$f</link>&#32;=&#32;fopen(<emphasis role="stringliteral">&apos;php://stdin&apos;</emphasis>,&#32;<emphasis role="charliteral">&apos;r&apos;</emphasis>);
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb">$contents</link>&#32;=&#32;<emphasis role="stringliteral">&apos;&apos;</emphasis>;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;(<link linkend="_line_8form_8php_1afd5772a58dbfc4cb00cc46fbecf2fdca">$line</link>&#32;=&#32;fgets(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$f</link>))&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb">$contents</link>&#32;.=&#32;<link linkend="_line_8form_8php_1afd5772a58dbfc4cb00cc46fbecf2fdca">$line</link>;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fclose(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$f</link>);
&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb">$contents</link>&#32;=&#32;file_get_contents(<emphasis role="stringliteral">&quot;php://input&quot;</emphasis>);
&#32;&#32;&#32;&#32;}
}

<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_front_2inventory_8php_1ad86c3fbc5672e1deeafc5229012b0b5d">$handle</link>&#32;===&#32;<emphasis role="keyword">true</emphasis>)&#32;{
&#32;&#32;&#32;&#32;<emphasis role="keywordflow">try</emphasis>&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_front_2inventory_8php_1a1e3a0fd801ce604f589c6170c4081334">$inventory_request</link>-&gt;handleRequest(<link linkend="_front_2inventory_8php_1a87e6516f43ab874500590fe9ec8315fb">$contents</link>);
&#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">catch</emphasis>&#32;(\Throwable&#32;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$e</link>)&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_front_2inventory_8php_1a1e3a0fd801ce604f589c6170c4081334">$inventory_request</link>-&gt;addError(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$e</link>-&gt;getMessage());
&#32;&#32;&#32;&#32;}
}

<link linkend="_front_2inventory_8php_1a1e3a0fd801ce604f589c6170c4081334">$inventory_request</link>-&gt;handleMessages()
</programlisting>
<para>Even if Fusion protocol is not supported for getConfig requests, they should be handled and answered with a json content type</para>
</section>
<anchor xml:id="_front_2inventory_8php_1afe9a9d2c579c635ef306b98960a32846"/><section>
    <title>foreach</title>
<indexterm><primary>foreach</primary><secondary>inventory.php</secondary></indexterm>
<indexterm><primary>inventory.php</primary><secondary>foreach</secondary></indexterm>
<para><computeroutput>foreach($headers <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">as</link> $key=&gt; $value) ( $headers as,  $value)</computeroutput></para></section>
</section>
</section>
