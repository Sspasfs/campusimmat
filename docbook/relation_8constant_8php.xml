<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_relation_8constant_8php" xml:lang="fr">
<title>Référence du fichier public/glpi/inc/relation.constant.php</title>
<indexterm><primary>public/glpi/inc/relation.constant.php</primary></indexterm>
<simplesect>
    <title>Variables    </title>
        <itemizedlist>
            <listitem><para><link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link></para>
</listitem>
            <listitem><para><link linkend="_relation_8constant_8php_1a0954500ad038ecd0af428c72bd928d00">$define_mapping_entry</link></para>
</listitem>
            <listitem><para><link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">global</link> <link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link></para>
</listitem>
            <listitem><para><link linkend="_relation_8constant_8php_1a2bae789332c7a56ff87f20f58bc9c52a">$specifically_managed_types</link></para>
</listitem>
            <listitem><para><link linkend="_relation_8constant_8php_1a281dc880642874a317d1bb532baaaeff">$polymorphic_types_mapping</link></para>
</listitem>
            <listitem><para><link linkend="_get_user_picture_8php_1a0df27c645324b72eaf7093e10f310670">foreach</link>($<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">CFG_GLPI</link>[&apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">itemdevices</link>&apos;] <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">as</link> $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">itemdevice_itemtype</link>) <link linkend="_relation_8constant_8php_1a149b8c29d2db8d5df09cbd54c24dd33a">$polymorphic_types_mapping</link> [\<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">VObject::class</link>] = []</para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Documentation des variables</title>
<anchor xml:id="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295"/><section>
    <title>$CFG_GLPI</title>
<indexterm><primary>$CFG_GLPI</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$CFG_GLPI</secondary></indexterm>
<para><computeroutput><link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">global</link> $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">CFG_GLPI</link></computeroutput></para></section>
<anchor xml:id="_relation_8constant_8php_1a0954500ad038ecd0af428c72bd928d00"/><section>
    <title>$define_mapping_entry</title>
<indexterm><primary>$define_mapping_entry</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$define_mapping_entry</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">define_mapping_entry</link></computeroutput></para><emphasis role="strong">Valeur initiale :</emphasis><programlisting linenumbering="unnumbered">=&#32;<emphasis role="keyword">static</emphasis>&#32;<emphasis role="keyword">function</emphasis>&#32;(<emphasis role="keywordtype">string</emphasis>&#32;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>,&#32;<emphasis role="keywordtype">string</emphasis>&#32;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>)&#32;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">use</link>&#32;(&amp;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>)&#32;{
&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!array_key_exists(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>,&#32;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>))&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>]&#32;=&#32;[];
&#32;&#32;&#32;&#32;}
&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!array_key_exists(<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>,&#32;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>]))&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>][<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>]&#32;=&#32;[];
&#32;&#32;&#32;&#32;}
&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(!is_array(<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>][<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>]))&#32;{
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>][<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>]&#32;=&#32;[<link linkend="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586">$RELATION</link>[<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$source_table</link>][<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">$target_table_key</link>]];
&#32;&#32;&#32;&#32;}
}
</programlisting></section>
<anchor xml:id="_relation_8constant_8php_1a281dc880642874a317d1bb532baaaeff"/><section>
    <title>$polymorphic_types_mapping<computeroutput>[1/2]</computeroutput></title>
<indexterm><primary>$polymorphic_types_mapping</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$polymorphic_types_mapping</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">polymorphic_types_mapping</link></computeroutput></para><emphasis role="strong">Valeur initiale :</emphasis><programlisting linenumbering="unnumbered">=&#32;[
&#32;&#32;&#32;&#32;Agent::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;agent_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Appliance_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;appliance_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Appliance_Item_Relation::class&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;appliance_relation_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Certificate_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;certificate_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Change_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;ticket_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Computer_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;directconnect_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Consumable::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;consumables_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Contract_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;contract_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;DatabaseInstance::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;databaseinstance_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Document_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;\Document::getItemtypesThatCanHave(),
&#32;&#32;&#32;&#32;Domain_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;domain_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Infocom::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;\Infocom::getItemtypesThatCanHave(),
&#32;&#32;&#32;&#32;Item_Cluster::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;cluster_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Disk::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;disk_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Enclosure::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;rackable_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Kanban::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;kanban_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_OperatingSystem::class&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;operatingsystem_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Problem::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;ticket_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Project::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;project_asset_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Rack::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;rackable_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_SoftwareLicense::class&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;software_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_SoftwareVersion::class&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;software_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Item_Ticket::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;ticket_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;KnowbaseItem_Item::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;kb_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;NetworkPort::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;networkport_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;ReservationItem::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;reservation_types&apos;</emphasis>],
&#32;&#32;&#32;&#32;Socket::class&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;=&gt;&#32;<link linkend="_relation_8constant_8php_1a2e00a61703ee4673cdfb5eb376a9b295">$CFG_GLPI</link>[<emphasis role="stringliteral">&apos;socket_types&apos;</emphasis>],
]
</programlisting></section>
<anchor xml:id="_relation_8constant_8php_1a149b8c29d2db8d5df09cbd54c24dd33a"/><section>
    <title>$polymorphic_types_mapping<computeroutput>[2/2]</computeroutput></title>
<indexterm><primary>$polymorphic_types_mapping</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$polymorphic_types_mapping</secondary></indexterm>
<para><computeroutput><link linkend="_get_user_picture_8php_1a0df27c645324b72eaf7093e10f310670">foreach</link> ( $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">CFG_GLPI</link>[ &apos;<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">itemdevices</link>&apos;] <link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">as</link> $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">itemdevice_itemtype</link>) $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">polymorphic_types_mapping</link>[\<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">VObject::class</link>] = []</computeroutput></para></section>
<anchor xml:id="_relation_8constant_8php_1ac968cdf76814834bc8e777aa5fe6f586"/><section>
    <title>$RELATION</title>
<indexterm><primary>$RELATION</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$RELATION</secondary></indexterm>
<para><computeroutput>array $<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">RELATION</link></computeroutput></para>
<para>Relation constants between tables.</para>

<para>This mapping is used for to detect links between objects. For example, it is used to detect if items are associated to another item that is going to be deleted, in order to prevent deletion or ask for user what to do with linked items.</para>

<para>Format is: [ &apos;referenced_table_name&apos; =&gt; [ &apos;linked_table_name_1&apos; =&gt; &apos;foreign_key_1&apos;, &apos;linked_table_name_2&apos; =&gt; [&apos;foreign_key_2&apos;, &apos;foreign_key_3&apos;], &apos;linked_table_name_2&apos; =&gt; [[&apos;items_id&apos;, &apos;itemtype&apos;]], ] ] where:<itemizedlist>
<listitem>
<para>&apos;referenced_table_name&apos; is the name of a table having its id referenced in other tables,</para>
</listitem><listitem>
<para>&apos;linked_table_name_*&apos; is the name of a table that have foreign keys referencing the table &apos;referenced_table_name&apos;,</para>
</listitem><listitem>
<para>&apos;foreign_key_*&apos; is the name of the field that is a foreign key (can be [&apos;items_id&apos;, &apos;itemtype&apos;]).</para>
</listitem></itemizedlist>
</para>

<para>/!\ &quot;_&quot; prefix is used to disable usage check on relations while deleting an item when they are handled by application. Applications handle specific usage check and links updates :<itemizedlist>
<listitem>
<para>in <computeroutput>CommonDBTM::cleanRelationTable()</computeroutput> method,</para>
</listitem><listitem>
<para>in <computeroutput>$item::cleanDBonPurge()</computeroutput> method,</para>
</listitem><listitem>
<para>using <computeroutput>$forward_entity_to</computeroutput> values,</para>
</listitem><listitem>
<para>by <computeroutput><link linkend="_class_common_tree_dropdown">CommonTreeDropdown</link></computeroutput> logic for recursive keys. Relations will still be used to check ability to disable recursivity on an element.</para>
</listitem></itemizedlist>
</para>

<para>/!\ Table&apos;s names are in alphabetic order - Please respect it </para>
</section>
<anchor xml:id="_relation_8constant_8php_1a2bae789332c7a56ff87f20f58bc9c52a"/><section>
    <title>$specifically_managed_types</title>
<indexterm><primary>$specifically_managed_types</primary><secondary>relation.constant.php</secondary></indexterm>
<indexterm><primary>relation.constant.php</primary><secondary>$specifically_managed_types</secondary></indexterm>
<para><computeroutput>$<link linkend="_report_8contract_8php_1a77b973d137fb33212e018b042df6e3e7">specifically_managed_types</link></computeroutput></para><emphasis role="strong">Valeur initiale :</emphasis><programlisting linenumbering="unnumbered">=&#32;[
&#32;&#32;&#32;&#32;Agent::class,&#32;
&#32;&#32;&#32;&#32;Consumable::class,&#32;
&#32;&#32;&#32;&#32;Item_Cluster::class,&#32;
&#32;&#32;&#32;&#32;Item_Enclosure::class,&#32;
&#32;&#32;&#32;&#32;Item_Rack::class,&#32;
]
</programlisting></section>
</section>
</section>
