<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CampusImmat: Change Log</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CampusImmat
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Change Log</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md7459"></a> </p>
<h1><a class="anchor" id="autotoc_md7460"></a>
1.1.8 - Nov 20, 2022</h1>
<p>Fixed:</p><ul>
<li>Fixed opening an archive with password (#37)</li>
<li>Fixed <code>UnifiedArchive-&gt;getComment()</code> now returns null when comment is not supported by driver (#39)</li>
<li>Fixed <code>UnifiedArchive-&gt;getFileData()-&gt;modificationTime</code> is integer timestamp now in case of NelexaZip driver instead of DateTimeImmutable (#38)</li>
<li>Fixed <code>PharData::create</code> for zip-archives</li>
</ul>
<p>Deprecations:</p><ul>
<li>Renamed methods of <code>UnifiedArchive</code>:<ul>
<li><code>getFileNames</code> =&gt; <code>getFiles</code></li>
<li><code>extractFiles</code> =&gt; <code>extract</code></li>
<li><code>addFiles</code> =&gt; <code>add</code></li>
<li><code>deleteFiles</code> =&gt; <code>delete</code></li>
<li><code>archiveFiles</code> =&gt; <code>archive</code></li>
<li><code>canOpenArchive</code> =&gt; <code>canOpen</code></li>
<li>Old methods are marked as deprecated and will be deleted in future releases.</li>
</ul>
</li>
<li>Marked as deprecated:<ul>
<li><code>UnifiedArchive::detectArchiveType</code> - use <code>Formats::detectArchiveFormat</code> instead</li>
<li><code>UnifiedArchive::archiveDirectory</code>/<code>archiveFile</code> - use <code>UnifiedArchive::archive</code> instead</li>
<li><code>UnifiedArchive::canCreateType</code> - <code>Formats::canCreate</code></li>
</ul>
</li>
</ul>
<p>New functions:</p><ul>
<li>Added method to get file extension for format: <code>Formats::getFormatExtension($archiveFormat)</code></li>
<li>Added method to get info about ready to archive files: <code>UnifiedArchive-&gt;prepareForArchiving($fileOrFiles, $archiveName = null)</code></li>
<li>Added method to create archive in memory: <code>UnifiedArchive::createInString()</code> and <code>BasicDriver::CREATE_IN_STRING</code> ability constant</li>
<li>Added new pure driver for Zip/Tar(gz/bz2) - SplitbrainPhpArchive.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7461"></a>
1.1.7 - Jul 31, 2022</h1>
<ul>
<li><code>open</code> does not throw an Exception, it returns null</li>
<li>returned deleted methods in UnifiedArchive: <code>canOpenArchive</code>, <code>canOpenType</code>, <code>canCreateType</code>, <code>getArchiveType</code>, <code>detectArchiveType</code>, <code>getFileResource</code>, <code>getArchiveFormat</code>, <code>isFileExists</code>, <code>getArchiveSize</code>, <code>countCompressedFilesSize</code>, <code>countUncompressedFilesSize</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7462"></a>
1.1.6 - Jul 31, 2022</h1>
<p><b>BC-breaking changes</b>:</p><ul>
<li>Changed signature: <code>UnifiedArchive::open($filename, string|null $password = null)</code> =&gt; <code>UnifiedArchive::open($filename, array $abilities = [], string|null $password = null)</code>. Right now if second argument is string, it will be treated as password (for BC-compatability).</li>
<li><code>open</code> throws an Exception when format is not recognized or there's no driver that support requested abilities.</li>
<li><code>addFiles</code>/<code>deleteFiles</code>/<code>getComment</code>/<code>setComment</code> throws an Exception when driver does not support this ability.</li>
<li>Deleted methods in UnifiedArchive: <code>canOpenArchive</code>, <code>canOpenType</code>, <code>canCreateType</code>, <code>getArchiveType</code>, <code>detectArchiveType</code>, <code>getFileResource</code>, <code>getArchiveFormat</code>, <code>isFileExists</code>, <code>getArchiveSize</code>, <code>countCompressedFilesSize</code>, <code>countUncompressedFilesSize</code>.</li>
</ul>
<p><b>New features</b>:</p><ul>
<li>Added passing needed abilities to <b>UnifiedArchive::open()</b> to select a better driver: <div class="fragment"><div class="line"><a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">use</a> <a class="code hl_class" href="classwapmorgan_1_1_unified_archive_1_1_drivers_1_1_basic_1_1_basic_driver.html">wapmorgan\UnifiedArchive\Drivers\Basic\BasicDriver</a>;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># opens an array with driver, that supports content streaming and appending</span></div>
<div class="line">$archive = \wapmorgan\UnifiedArchive\UnifiedArchive::open(<span class="stringliteral">&#39;archive.7z&#39;</span>, [BasicDriver::STREAM_CONTENT, BasicDriver::APPEND]);</div>
<div class="line"><span class="preprocessor"># if not specified, uses OPEN or OPEN_ENCRYPTED check, if password passed</span></div>
<div class="ttc" id="aclasswapmorgan_1_1_unified_archive_1_1_drivers_1_1_basic_1_1_basic_driver_html"><div class="ttname"><a href="classwapmorgan_1_1_unified_archive_1_1_drivers_1_1_basic_1_1_basic_driver.html">wapmorgan\UnifiedArchive\Drivers\Basic\BasicDriver</a></div><div class="ttdef"><b>Definition</b> BasicDriver.php:13</div></div>
<div class="ttc" id="areport_8contract_8php_html_a77b973d137fb33212e018b042df6e3e7"><div class="ttname"><a href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">$y</a></div><div class="ttdeci">$y</div><div class="ttdef"><b>Definition</b> report.contract.php:71</div></div>
</div><!-- fragment --></li>
<li>Added <code>UnifiedArchive::test($files = [])</code> (and <code>cam files:test</code> command) to test archive contents (compare actual control sum with stored crc32).</li>
<li>More informative output in commands: <code>system:drivers</code>, <code>system:formats</code>, <code>system:format</code>, added command <code>files:test</code>.</li>
<li>Added driver abilities to select better driver.</li>
</ul>
<p><b>Driver changes:</b></p><ul>
<li>Added <code>NelexaZip</code> pure-PHP driver.</li>
<li>Added <code>Iso</code> driver extraction ability.</li>
<li>Added commenting-ability for <code>SevenZip</code> driver (via <code>descript.ion</code> file in archive).</li>
</ul>
<h1><a class="anchor" id="autotoc_md7463"></a>
1.1.5 - Jun 28, 2022</h1>
<p><b>New features</b>:</p><ul>
<li>Reimplemented <code>cam</code> (console utility) - now it's on symfony/console and supports all features and more functions (folders, types) of UA.</li>
<li>Added more detailed installation instructions (<code>./vendor/bin/cam system:drivers</code>) of specific drivers: AlchemyZippy, Cab, Iso, Lzma, Rar, SevenZip, TarByPear.</li>
<li>Added ability to track progress of archive creation - new argument <code>?callable $fileProgressCallable</code> of <code>UnifiedArchive::archiveFiles()</code>.</li>
<li>Added ability to <b>pass few directories to be placed in one in-archive directory</b> in archiving/appending (<code>addFiles()</code>/<code>archiveFiles()</code>) <div class="fragment"><div class="line">[</div>
<div class="line">    <span class="stringliteral">&#39;&#39;</span> =&gt; [<span class="stringliteral">&#39;./folder1&#39;</span>, <span class="stringliteral">&#39;./folder2&#39;</span>],</div>
<div class="line">    <span class="stringliteral">&#39;README.md&#39;</span> =&gt; <span class="stringliteral">&#39;./subfolder/README.md&#39;</span></div>
<div class="line">] # Archive <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">will</a> <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">have</a> all <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">folder1</a>, <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">folder2</a> <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">contents</a> in <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">the</a> <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">root</a> and <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">README</a>.md</div>
</div><!-- fragment --></li>
</ul>
<p><b>Fixed</b>:</p><ul>
<li>Fixed <code>extract()</code> and <code>listContent()</code> and their result of <b>PclZip</b> interface (<code>UnifiedArchive::getPclZipInterface()</code>) to correspond to original library (object =&gt; array).</li>
<li>Added tests on archiving, extraction and for PclZip-interface.</li>
</ul>
<p><b>Format changes</b>:</p><ul>
<li>Fixed counting of extracted files when extracting the whole archive in <code>TarByPear, TarByPhar, Zip</code>.</li>
<li>Fixed calculation archive entry compressed size (approximately) and modification time, implemented entry content streaming in <code>TarByPhar</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7464"></a>
1.1.4 - Dec 21, 2021</h1>
<p>Disabled <code>rar</code> for SevenZip driver.</p>
<h1><a class="anchor" id="autotoc_md7465"></a>
1.1.3 - May 2, 2021</h1>
<p><b>Changed format of <code>$files</code> in <code>archiveFiles()</code> and <code>addFiles()</code></b> </p><div class="fragment"><div class="line">[</div>
<div class="line">    <span class="stringliteral">&#39;/var/www/log.txt&#39;</span>,                <span class="comment">// will be &quot;/var/www/log.txt&quot;</span></div>
<div class="line">    <span class="stringliteral">&#39;log2.txt&#39;</span> =&gt; <span class="stringliteral">&#39;/var/www/log2.txt&#39;</span>, <span class="comment">// will be &quot;/log2.txt&quot;</span></div>
<div class="line">    <span class="stringliteral">&#39;/var/www/site&#39;</span>,                   <span class="comment">// will be &quot;/var/www/site&quot;</span></div>
<div class="line">    <span class="stringliteral">&#39;site2&#39;</span> =&gt; <span class="stringliteral">&#39;/var/www/site2&#39;</span>,       <span class="comment">// will be &quot;/site2&quot;</span></div>
<div class="line">]</div>
</div><!-- fragment --><p>Old format also works, but there can be a bad case. If you have */var/www/log2.txt* and <em>log2.txt</em> (in current directory) and pass following: </p><div class="fragment"><div class="line">[</div>
<div class="line"><span class="stringliteral">&#39;/var/www/log2.txt&#39;</span> =&gt; <span class="stringliteral">&#39;log2.txt&#39;</span>,</div>
<div class="line">]</div>
</div><!-- fragment --><p> it will archive <em>log2.txt</em> as */var/www/log2.txt* in an archive (new behaviour).</p>
<p><b>New features</b>:</p><ul>
<li>Added <code>Formats::canStream()</code> to check if an archive files can be streamed.</li>
<li>Added ability to create archives, encrypted with password (only <em>zip</em> (<code>Zip</code>, <code>SevenZip</code>) and <em>7z</em> (<code>SevenZip</code>)) - added nullable <code>$password</code> argument to:<ul>
<li><code>UnifiedArchive::archiveFiles($fileOrFiles, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE, $password = null)</code></li>
<li><code>UnifiedArchive::archiveFile($file, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE, $password = null)</code></li>
<li><code>UnifiedArchive::archiveDirectory($directory, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE, $password = null)</code></li>
</ul>
</li>
<li>Added <code>UnifiedArchive-&gt;getMimeType()</code> to get mime type of archive.</li>
<li>Added <code>UnifiedArchive-&gt;getComment()</code> to get comment of an archive. Available only in <code>Zip</code> and <code>Rar</code> drivers, others return <code>null</code>.</li>
<li>Added <code>UnifiedArchive-&gt;setComment(?string $comment)</code> to set comment. Available only in <code>Zip</code>.</li>
<li>Added filter in <code>UnifiedArcihve-&gt;getFileNames()</code>. If works as <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">fnmatch()</a></code> does.</li>
<li>Added ability to iterate over archive and access files data as array: <div class="fragment"><div class="line">$a = \wapmorgan\UnifiedArchive\UnifiedArchive::open(<span class="stringliteral">&#39;tests/archives/fixtures.7z&#39;</span>);</div>
<div class="line"><span class="keywordflow">foreach</span> ($a <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">as</a> <a class="code hl_variable" href="aealarabiya_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a> =&gt; <a class="code hl_variable" href="map_8php.html#ac4cc485208612884539dda2da7d39024">$data</a>) {</div>
<div class="line">    <a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">echo</a> <a class="code hl_variable" href="aealarabiya_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a>.PHP_EOL;</div>
<div class="line"> }</div>
<div class="line"> </div>
<div class="line"><a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">$file_data</a> = $a[<span class="stringliteral">&#39;filename&#39;</span>];</div>
<div class="ttc" id="aaealarabiya_8php_html_aa1bfbd27060176201b271918dff57e8f"><div class="ttname"><a href="aealarabiya_8php.html#aa1bfbd27060176201b271918dff57e8f">$file</a></div><div class="ttdeci">$file</div><div class="ttdef"><b>Definition</b> aealarabiya.php:11</div></div>
<div class="ttc" id="amap_8php_html_ac4cc485208612884539dda2da7d39024"><div class="ttname"><a href="map_8php.html#ac4cc485208612884539dda2da7d39024">$data</a></div><div class="ttdeci">$data</div><div class="ttdef"><b>Definition</b> map.php:53</div></div>
</div><!-- fragment --></li>
</ul>
<p><b>Fixed:</b></p><ul>
<li>Fixed <code>SevenZip</code> driver: disabled <em>tar.gz, tar.bzip2</em> support as it isn't supported properly and described which formats driver can create, append, modify and encrypt.</li>
</ul>
<p><b>Methods renamed</b> (old exist, but marked as deprecated):</p><ul>
<li><code>UnifiedArchive-&gt;getArchiveFormat</code> -&gt; <code>UnifiedArchive-&gt;getFormat</code>.</li>
<li><code>UnifiedArchive-&gt;getArchiveSize</code> -&gt; <code>UnifiedArchive-&gt;getSize</code>.</li>
<li><code>UnifiedArchive-&gt;countCompressedFilesSize</code> -&gt; <code>UnifiedArchive-&gt;getCompressedSize</code>.</li>
<li><code>UnifiedArchive-&gt;countUncompressedFilesSize</code> -&gt; <code>UnifiedArchive-&gt;getOriginalSize</code>.</li>
<li><code>UnifiedArchive-&gt;getFileResource</code> -&gt; <code>UnifiedArchive-&gt;getFileStream</code>.</li>
<li><code>UnifiedArchive-&gt;isFileExists</code> -&gt; <code>UnifiedArchive-&gt;hasFile</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7466"></a>
1.1.2 - Mar 1, 2021</h1>
<p>Fixed calculation of tar's uncompressed size opened via <code>TarByPear</code> driver. Fixed working with <em>tar.xz</em> archives.</p>
<h1><a class="anchor" id="autotoc_md7467"></a>
1.1.1 - Feb 13, 2021</h1>
<p>Cleaned package.</p>
<h1><a class="anchor" id="autotoc_md7468"></a>
1.1.0 - Feb 13, 2021</h1>
<p><b>New features</b>:</p><ul>
<li>Added ability to open archives encrypted with password - added <code>$password</code> argument to <code>UnifiedArchive::open($fileName, $password = null)</code>. Works only with: zip, rar, 7z. <br  />
</li>
<li>Added ability to adjust compression level for new archives - added <code>$compressionLevel</code> argument (with default <code>BasicDriver::COMPRESSION_AVERAGE</code> level) to:<ul>
<li><code>UnifiedArchive::archiveFiles($fileOrFiles, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE)</code></li>
<li><code>UnifiedArchive::archiveFile($file, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE)</code></li>
<li><code>UnifiedArchive::archiveDirectory($file, $archiveName, $compressionLevel = BasicDriver::COMPRESSION_AVERAGE)</code> Works only with: zip, gzip.</li>
</ul>
</li>
<li>Added ability to append the archive with a file from string - added <code>addFileFromString</code> method: <code>UnifiedArchive-&gt;addFileFromString(string $inArchiveName, string $content)</code>.</li>
<li>Added tests for format support:<ul>
<li><code>Formats::canOpen()</code></li>
<li><code>Formats::canCreate()</code></li>
<li><code>Formats::canAppend()</code> - check if file can be added to an archive</li>
<li><code>Formats::canUpdate()</code> - check if archive member can be removed</li>
<li><code>Formats::canEncrypt()</code> - check if encrypted archive can be opened</li>
</ul>
</li>
</ul>
<p><b>Format changes</b>:</p><ul>
<li>Extended <em>SevenZip</em> driver: now it supports a lot of formats (7z, zip, rar, iso, tar and so on).</li>
<li>Added <em>AlchemyZippy</em> driver: it works via command-line programs for zip, tar, tar.gz and tar.bz2.</li>
</ul>
<p><b>Methods renamed:</b></p><ul>
<li><code>UnifiedArchive::canOpenType</code> -&gt; <code>Formats::canOpen</code></li>
<li><code>UnifiedArchive::canOpenArchive</code> -&gt; <code>UnifiedArchive::canOpen</code></li>
<li><code>UnifiedArchive::canCreateType</code> -&gt; <code>Formats::canCreate</code></li>
<li><code>UnifiedArchive-&gt;getArchiveType</code> -&gt; <code>UnifiedArchive-&gt;getArchiveFormat</code></li>
<li>Old methods exist, but marked as deprecated.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7469"></a>
1.0.1 - Nov 28, 2020</h1>
<ul>
<li>Improved extendable for all classes - used late-static binding everywhere.</li>
</ul>
<p>Format specific:</p><ul>
<li><b>gzip</b>: improved detection of archive by content.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7470"></a>
1.0.0 - Jun 13, 2020</h1>
<p>Format specific:</p><ul>
<li><b>tar</b>:<ul>
<li>Fixed automatic opening of .tar.Z and .tar.xz.</li>
</ul>
</li>
<li><b>rar</b>:<ul>
<li>Exclude directories from files list.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md7471"></a>
0.2.0 - Feb 2, 2020</h1>
<p><b>BC-breaking changes</b>:</p><ul>
<li><b>Deleted deprecated UnifiedArchive methods</b>: <code>extractNode</code>, <code>archiveNodes</code>.</li>
<li>Functionality of preparing files list for archiving is moved from <code>archiveFiles()</code> to <code>prepareForArchiving()</code>.</li>
<li><b>All mutable methods throws exceptions on errors now</b>:<ul>
<li><code>getFileData</code>, <code>getFileContent</code>, <code>getFileResource</code> throws <code>NonExistentArchiveFileException</code> when file is not present in archive.</li>
<li><code>extractFiles</code> throws:<ul>
<li><code>EmptyFileListException</code></li>
<li><code>ArchiveExtractionException</code></li>
</ul>
</li>
<li><code>deleteFiles</code>, <code>addFiles</code>, <code>addFile</code> and <code>addDirectory</code> throws:<ul>
<li><code>EmptyFileListException</code></li>
<li><code>UnsupportedOperationException</code></li>
<li><code>ArchiveModificationException</code></li>
</ul>
</li>
<li><code>archiveFiles</code>, <code>archiveFile</code> and <code>archiveDirectory</code> throws:<ul>
<li><code>FileAlreadyExistsException</code></li>
<li><code>EmptyFileListException</code></li>
<li><code>UnsupportedOperationException</code></li>
<li><code>ArchiveCreationException</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md7472"></a>
0.1.3 - Jan 13, 2020</h1>
<p><b>BC-breaking changes</b>:</p><ul>
<li><b>Minimal version is 5.5.0</b>.</li>
</ul>
<p>Format specific:</p><ul>
<li><b>zip</b>: Fixed PclZip-interface</li>
<li><b>7zip</b>: Fixed 7z-archiving, when archiving files should be renamed in archive</li>
<li><b>lzw</b>: Fixed check for availability (#15)</li>
</ul>
<p>New features:</p><ul>
<li>Added <code>canCreateType(): bool</code></li>
<li>Added <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">canAddFiles()</a>: bool</code></li>
<li>Added <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">canDeleteFiles()</a>: bool</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md7473"></a>
0.1.2 - Jan 03, 2019</h1>
<p><b>BC-breaking changes</b>:</p><ul>
<li>PclZip-interface getter renamed to <code>getPclZipInterface()</code>.</li>
<li>Make <code>addFiles()</code> return number of <b>added files</b> instead of total files number.</li>
</ul>
<p>Other changes:</p><ul>
<li>Make <code>addFiles()</code> / <code>deleteFiles()</code> / <code>archiveFiles()</code> throw <code>\Exception</code>s when any error occurred (and even when files list is empty).</li>
<li>Fixed usage of <code>/</code> always as directory separator in <code>addFiles()</code> and <code>archiveFiles()</code>.</li>
</ul>
<p>Format-specific changes:</p><ul>
<li>Divided format-specific code into separate components.</li>
<li><b>zip</b>:<ul>
<li>Excluded directories from files list (<code>getFileNames()</code>).</li>
<li>Fixed retrieving new list of files after <code>addFiles()</code> usage.</li>
<li>(#11) Fixed invalid "/" archive entry after <code>archiveFiles()</code> usage.</li>
</ul>
</li>
<li><b>tar</b> (<code>TarArchive</code> adapter):<ul>
<li>Fixed number of added files of <code>addFiles()</code>.</li>
<li>Fixed list of files after <code>deleteFiles()</code> usage.</li>
<li>Added checks for compressed tar's support in <code>canOpenArchive()</code> and <code>canOpenType()</code>.</li>
</ul>
</li>
<li><b>tar</b> (<code>PharData</code> adapter):<ul>
<li>Fixed list of files after <code>addFiles()</code>/<code>deleteFiles()</code> usage and path generation of archive in <code>archiveFiles()</code>.</li>
<li>Fixed path of files in <code>getFileNames()</code> to use UNIX path separator ("/").</li>
</ul>
</li>
<li><b>iso</b>:<ul>
<li>Excluded directories from files list (<code>getFileNames()</code>).</li>
</ul>
</li>
<li><b>7zip</b>:<ul>
<li>Fixed result of <code>deleteFiles()</code> and <code>archiveFiles()</code> in-archive paths.</li>
<li>Fixed calculation of compressed file size in <code>getFileData()</code>.</li>
<li>(#10) Set infinite timeout of <code>7z</code> system call (useful for big archives).</li>
</ul>
</li>
<li><b>cab</b>:<ul>
<li>Fixed <code>extractFiles()</code> functionality.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md7474"></a>
0.1.1 - Sep 21, 2018</h1>
<p>API changes:</p><ul>
<li><b>Changed algorithm of files list generation in <code>archiveFiles()</code> and <code>addFiles()</code></b>: <div class="fragment"><div class="line"><span class="comment">// 1. one file</span></div>
<div class="line">$archive-&gt;archiveFiles(<span class="stringliteral">&#39;/var/www/site/abc.log&#39;</span>, <span class="stringliteral">&#39;archive.zip&#39;</span>); <span class="comment">// =&gt; stored as &#39;abc.log&#39;</span></div>
<div class="line"><span class="comment">// 2. directory</span></div>
<div class="line">$archive-&gt;archiveFiles(<span class="stringliteral">&#39;/var/www/site/runtime/logs&#39;</span>, <span class="stringliteral">&#39;archive.zip&#39;</span>); <span class="comment">// =&gt; directory content stored in archive root</span></div>
<div class="line"><span class="comment">// 3. list</span></div>
<div class="line">$archive-&gt;archiveFiles([</div>
<div class="line">      <span class="stringliteral">&#39;/var/www/site/abc.log&#39;</span> =&gt; <span class="stringliteral">&#39;abc.log&#39;</span>, <span class="comment">// stored as &#39;abc.log&#39;</span></div>
<div class="line">      <span class="stringliteral">&#39;/var/www/site/abc.log&#39;</span>, <span class="comment">// stored as &#39;/var/www/site/abc.log&#39;</span></div>
<div class="line">      <span class="stringliteral">&#39;/var/www/site/runtime/logs&#39;</span> =&gt; <span class="stringliteral">&#39;logs&#39;</span>, <span class="comment">// directory content stored in &#39;logs&#39; dir</span></div>
<div class="line">      <span class="stringliteral">&#39;/var/www/site/runtime/logs&#39;</span>, <span class="comment">// stored as &#39;/var/www/site/runtime/logs&#39;</span></div>
<div class="line">], <span class="stringliteral">&#39;archive.zip&#39;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Disabled paths expanding in <code>extractFiles()</code> and <code>deleteFiles()</code> by default</b>.</p>
<p class="startli">If you need to expand <code>src/</code> path to all files within this directory in archive, set second argument <code>$expandFilesList</code> argument to <code>true</code>. </p><div class="fragment"><div class="line">$archive-&gt;extractFiles(<a class="code hl_variable" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">__DIR__</a>, <span class="stringliteral">&#39;src/&#39;</span>, <span class="keyword">true</span>);</div>
<div class="line">$archive-&gt;deleteFiles(<span class="stringliteral">&#39;tests/&#39;</span>, <span class="keyword">true</span>);</div>
</div><!-- fragment --></li>
<li>Added new element in <code>archiveFiles()</code> result in emulation mode. Now it returns an archive with 4 elements: new <code>type</code> element with archive type.</li>
</ul>
<p>Fixes:</p><ul>
<li>Fixed <b>LZW-stream</b> (.tar.Z) wrapper (before it didn't work).</li>
<li>Fixed <b>ISO</b> archives reading (before archive size could be calculated wrong).</li>
<li>Fixed <b>CAB</b> archives extraction in <code>getFileContent($file)</code> (before it didn't work).</li>
<li>Improved extraction in <code>getFileContent($file)</code> for <b>RAR</b> archives by using streams (before it did extract file in temporarily folder, read it and then delete it).</li>
</ul>
<p>Improvements:</p><ul>
<li>Added <code>isFileExists($file): bool</code> method for checking if archive has a file with specific name.</li>
<li>Added <code>getFileResource($file): resource</code> method for getting a file descriptor for reading all file content without full extraction in memory.</li>
<li>Added <code>canOpenArchive($archiveFileName): bool</code> and <code>canOpenType($archiveFormat): bool</code> static methods to check if specific archive or format can be opened.</li>
<li>Added <code>detectArchiveType($fileName): string|false</code> static method to detect (by filename or content) archive type.</li>
<li>Added <code>addFile($file, $inArchiveName = null)</code> / <code>addDirectory($directory, $inArchivePath = null)</code> to add one file or one directory, <code>archiveFile($file, $archiveName)</code> / <code>archiveDirectory($directory, $archiveName)</code> to archive one file or directory.</li>
</ul>
<p>Miscellaneous:</p><ul>
<li>Added simple tests.</li>
<li>Added <code>phar</code> distribution.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7475"></a>
0.1.0 - Apr 11, 2018</h1>
<p>API changes:</p><ul>
<li>Renamed methods <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">extractNode()</a></code> → <code>extractFiles()</code>, <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">archiveNodes()</a></code> → <code>archiveFiles()</code>. Original method are still available with <code>@deprecated</code> status.</li>
<li><code>getFileData()</code> now returns <code>ArchiveEntry</code> instance instead of <code>stdClass</code>. Original object fields are still available with <code>@deprecated</code> status.</li>
<li><code>addFiles()</code> and <code>deleteFiles()</code> now return false when archive is not editable.</li>
</ul>
<p>Improvements:</p><ul>
<li>Added checks of archive opening status in constructor: now an <code>Exception</code> will be throwed if archive file is not readable.</li>
<li>Some changes in <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">archiveNodes()</a></code> about handling directory names.</li>
<li>Fixed archive rescan in <code>addFiles()</code> and <code>deleteFiles()</code>.</li>
</ul>
<p>Miscellaneous:</p><ul>
<li>Removed example scripts (<code>examples/</code>).</li>
<li>Code changes: added comments.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7476"></a>
0.0.11 - Mar 21, 2018</h1>
<ul>
<li>Cleaned up some old code.</li>
<li>Added <code>ext-phar</code> adapter for tar archives (if <code>pear/archive_tar</code> is not installed).</li>
</ul>
<h1><a class="anchor" id="autotoc_md7477"></a>
0.0.10 - Aug 7, 2017</h1>
<ul>
<li>Remove <code>docopt</code> from requirements. Now it's a suggestion.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7478"></a>
0.0.9 - Jul 20, 2017</h1>
<ul>
<li>Added <code>cam</code> (Console Archive Manager) script.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7479"></a>
0.0.8 - Jan 24, 2017</h1>
<ul>
<li>Added initial support for <code>CAB</code> archives without extracting.</li>
<li>Added handling of short names of tar archives (.tgz/.tbz2/...).</li>
<li>Removed external repository declaration.</li>
<li>Removed <code><a class="el" href="report_8contract_8php.html#a77b973d137fb33212e018b042df6e3e7">die()</a></code> in source code.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7480"></a>
0.0.7 - Jan 14, 2017</h1>
<ul>
<li>Fixed usage of <code>ereg</code> function for PHP &gt;7.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7481"></a>
0.0.6 - Jan 9, 2017</h1>
<ul>
<li>Added functionality for adding files in archive.</li>
<li>Added functionality for deleting files from archive.</li>
<li>Fixed discovering <code>7z</code> archive number of files and creating new archive.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7482"></a>
0.0.5 - Jan 8, 2017</h1>
<ul>
<li>Added support for <code>7z</code> (by 7zip-cli) archives.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7483"></a>
0.0.4 - Jan 7, 2017</h1>
<ul>
<li>Added support for single-file <code>bz2</code> (bzip2) and <code>xz</code> (lzma2) archives.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7484"></a>
0.0.3 - Aug 18, 2015</h1>
<ul>
<li>Removed <code>archive_tar</code> from required packages.</li>
</ul>
<h1><a class="anchor" id="autotoc_md7485"></a>
0.0.2 - May 27, 2014</h1>
<ul>
<li>Released under the MIT license</li>
</ul>
<h1><a class="anchor" id="autotoc_md7486"></a>
0.0.1 - May 26, 2014</h1>
<p>First version. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré par&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
