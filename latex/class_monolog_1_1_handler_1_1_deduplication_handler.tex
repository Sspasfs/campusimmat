\doxysection{Référence de la classe Deduplication\+Handler}
\hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler}{}\label{class_monolog_1_1_handler_1_1_deduplication_handler}\index{DeduplicationHandler@{DeduplicationHandler}}


Graphe d\textquotesingle{}héritage de Deduplication\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_monolog_1_1_handler_1_1_deduplication_handler__inherit__graph}
\end{center}
\end{figure}


Graphe de collaboration de Deduplication\+Handler\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{class_monolog_1_1_handler_1_1_deduplication_handler__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Fonctions membres publiques}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a0ad297188c9b6686d8b43b7146d569b5}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}} \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{handler}}, ?string \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{deduplication\+Store}}=null, \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{deduplication\+Level}}=\mbox{\hyperlink{class_monolog_1_1_logger_a7f79d7b73cfb40bb7855d4260393cc0f}{Logger\+::\+ERROR}}, int \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{time}}=60, bool \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bubble}}=true)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38}{flush}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres publiques hérités de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler}{Buffer\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a5241e1190e598d7d4a3922032aa0f9ec}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}} \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{handler}}, int \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{buffer\+Limit}}=0, \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{level}}=\mbox{\hyperlink{class_monolog_1_1_logger_a758c150b67e476ecf77478f16b387c61}{Logger\+::\+DEBUG}}, bool \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bubble}}=true, bool \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{flush\+On\+Overflow}}=false)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a421831a265621325e1fdd19aace0c758}{\+\_\+\+\_\+destruct}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aa69c8bf1f1dcf4e72552efff1fe3e87e}{close}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aa821bec12eaa7e0f649397c9675ff505}{clear}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a4a20559544fdf4dcb457e258dc976cf8}{reset}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a87804f2347dd817752ef1faa1f0dea05}{set\+Formatter}} (\mbox{\hyperlink{interface_monolog_1_1_formatter_1_1_formatter_interface}{Formatter\+Interface}} \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{formatter}})
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_aad3a8e83c90770a1f71a75bb51e782d8}{get\+Formatter}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres publiques hérités de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler}{Abstract\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a6d40ebd1c8e1bb525417cb02ecaf4185}{\+\_\+\+\_\+construct}} (\$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{level}}=\mbox{\hyperlink{class_monolog_1_1_logger_a758c150b67e476ecf77478f16b387c61}{Logger\+::\+DEBUG}}, bool \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bubble}}=true)
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_abbfbbcd3430dea8422ecd3c725737758}{is\+Handling}} (array \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{record}})
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a0b759f4af85ea8fe8967823a30d54f0c}{set\+Level}} (\$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{level}})
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a23fac327059bf3fd0fe57555252d8cf2}{get\+Level}} ()
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_ac98541e5bd5ed488d21e6c806d551506}{set\+Bubble}} (bool \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bubble}})
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a013f02d7a1343068d758c412223c2a95}{get\+Bubble}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres publiques hérités de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler}{Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler_a944865926b0302ad2d802bea1eec3a57}{handle\+Batch}} (array \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{records}})
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_handler_aaf11785905da71774e052912d784e3b4}{\+\_\+\+\_\+sleep}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres publiques hérités de \mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface_ad54b568c673b7b4fc724268a54313603}{handle}} (array \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{record}})
\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres publiques hérités de \mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface}{Processable\+Handler\+Interface}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface_a14c91c0ddce4f5cb91bc031e68c00453}{push\+Processor}} (\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{callable}} \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{callback}})
\item 
\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_processable_handler_interface_aece5018a30e181b7c02b82a8470b5017}{pop\+Processor}} ()
\end{DoxyCompactItemize}
\doxysubsubsection*{Attributs protégés}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a8b0df9267f7acdbd07e5bbd69148d72e}{\$deduplication\+Store}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a93f65fb96fda792b9840ddd55b2d0354}{\$deduplication\+Level}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_deduplication_handler_a78db1a0602e3b6ac1d9a1b5ec103c160}{\$time}}
\end{DoxyCompactItemize}
\doxysubsection*{Attributs protégés hérités de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler}{Buffer\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a9285a7f684c72e9bb78fdef1bcbe3fd0}{\$handler}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a17c521c4314b58090cecc52aae5e6a5f}{\$buffer\+Size}} = 0
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a3551ec3c817e8c79523e1eb397e0d62f}{\$buffer\+Limit}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a3a9067fe1fe898bbcb52f2d1066d1692}{\$flush\+On\+Overflow}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_af1862006a19e84e552f66189adc792ae}{\$buffer}} = \mbox{[}$\,$\mbox{]}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a533c66c9995bd9f022b5f5b325c12ad4}{\$initialized}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Attributs protégés hérités de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler}{Abstract\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_abd32cc82c6a3f79491987de36ad580ca}{\$level}} = \mbox{\hyperlink{class_monolog_1_1_logger_a758c150b67e476ecf77478f16b387c61}{Logger\+::\+DEBUG}}
\item 
\mbox{\hyperlink{class_monolog_1_1_handler_1_1_abstract_handler_a9145e898a529a9347d8af930c6c3c60c}{\$bubble}} = true
\end{DoxyCompactItemize}


\doxysubsection{Description détaillée}
Simple handler wrapper that deduplicates log records across multiple requests

It also includes the Buffer\+Handler functionality and will buffer all messages until the end of the request or flush() is called.

This works by storing all log records\textquotesingle{} messages above \$deduplication\+Level to the file specified by \$deduplication\+Store. When further logs come in at the end of the request (or when flush() is called), all those above \$deduplication\+Level are checked against the existing stored logs. If they match and the timestamps in the stored log is not older than \$time seconds, the new log record is discarded. If no log record is new, the whole data set is discarded.

This is mainly useful in combination with Mail handlers or things like Slack or Hip\+Chat handlers that send messages to people, to avoid spamming with the same message over and over in case of a major component failure like a database server being down which makes all requests fail in the same way.

\begin{DoxyAuthor}{Auteur}
Jordi Boggiano \href{mailto:j.boggiano@seld.be}{\texttt{ j.\+boggiano@seld.\+be}}
\end{DoxyAuthor}
@phpstan-\/import-\/type Record from \textbackslash{}\+Monolog\textbackslash{}\+Logger @phpstan-\/import-\/type Level\+Name from \textbackslash{}\+Monolog\textbackslash{}\+Logger @phpstan-\/import-\/type Level from \textbackslash{}\+Monolog\textbackslash{}\+Logger 

\doxysubsection{Documentation des constructeurs et destructeur}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a0ad297188c9b6686d8b43b7146d569b5}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a0ad297188c9b6686d8b43b7146d569b5} 
\index{DeduplicationHandler@{DeduplicationHandler}!\_\_construct@{\_\_construct}}
\index{\_\_construct@{\_\_construct}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\_\_construct()}{\_\_construct()}}
{\footnotesize\ttfamily \+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_monolog_1_1_handler_1_1_handler_interface}{Handler\+Interface}}}]{\$handler,  }\item[{?string}]{\$deduplication\+Store = {\ttfamily null},  }\item[{}]{\$deduplication\+Level = {\ttfamily \mbox{\hyperlink{class_monolog_1_1_logger_a7f79d7b73cfb40bb7855d4260393cc0f}{Logger\+::\+ERROR}}},  }\item[{int}]{\$time = {\ttfamily 60},  }\item[{bool}]{\$bubble = {\ttfamily true} }\end{DoxyParamCaption})}


\begin{DoxyParams}[1]{Paramètres}
Handler\+Interface & {\em \$handler} & Handler. \\
\hline
string & {\em \$deduplication\+Store} & The file/path where the deduplication log should be kept \\
\hline
string | int & {\em \$deduplication\+Level} & The minimum logging level for log records to be looked at for deduplication purposes \\
\hline
int & {\em \$time} & The period (in seconds) during which duplicate entries should be suppressed after a given log is sent through \\
\hline
bool & {\em \$bubble} & Whether the messages that are handled can bubble up the stack or not\\
\hline
\end{DoxyParams}
@phpstan-\/param Level\texorpdfstring{$\vert$}{|}\+Level\+Name\texorpdfstring{$\vert$}{|}\+Log\+Level\+::\texorpdfstring{$\ast$}{*} \$deduplication\+Level Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=316pt]{class_monolog_1_1_handler_1_1_deduplication_handler_a0ad297188c9b6686d8b43b7146d569b5_cgraph}
\end{center}
\end{figure}


\doxysubsection{Documentation des fonctions membres}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38} 
\index{DeduplicationHandler@{DeduplicationHandler}!flush@{flush}}
\index{flush@{flush}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Réimplémentée à partir de \mbox{\hyperlink{class_monolog_1_1_handler_1_1_buffer_handler_a7751f77b5263bcf940ece6e824a05b38}{Buffer\+Handler}}.

Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=306pt]{class_monolog_1_1_handler_1_1_deduplication_handler_a7751f77b5263bcf940ece6e824a05b38_cgraph}
\end{center}
\end{figure}


\doxysubsection{Documentation des champs}
\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a93f65fb96fda792b9840ddd55b2d0354}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a93f65fb96fda792b9840ddd55b2d0354} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$deduplicationLevel@{\$deduplicationLevel}}
\index{\$deduplicationLevel@{\$deduplicationLevel}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$deduplicationLevel}{\$deduplicationLevel}}
{\footnotesize\ttfamily \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{deduplication\+Level}}\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a8b0df9267f7acdbd07e5bbd69148d72e}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a8b0df9267f7acdbd07e5bbd69148d72e} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$deduplicationStore@{\$deduplicationStore}}
\index{\$deduplicationStore@{\$deduplicationStore}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$deduplicationStore}{\$deduplicationStore}}
{\footnotesize\ttfamily \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{deduplication\+Store}}\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{class_monolog_1_1_handler_1_1_deduplication_handler_a78db1a0602e3b6ac1d9a1b5ec103c160}\label{class_monolog_1_1_handler_1_1_deduplication_handler_a78db1a0602e3b6ac1d9a1b5ec103c160} 
\index{DeduplicationHandler@{DeduplicationHandler}!\$time@{\$time}}
\index{\$time@{\$time}!DeduplicationHandler@{DeduplicationHandler}}
\doxysubsubsection{\texorpdfstring{\$time}{\$time}}
{\footnotesize\ttfamily \$\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{time}}\hspace{0.3cm}{\ttfamily [protected]}}



La documentation de cette classe a été générée à partir du fichier suivant \+:\begin{DoxyCompactItemize}
\item 
public/glpi/vendor/monolog/monolog/src/\+Monolog/\+Handler/\mbox{\hyperlink{_deduplication_handler_8php}{Deduplication\+Handler.\+php}}\end{DoxyCompactItemize}
