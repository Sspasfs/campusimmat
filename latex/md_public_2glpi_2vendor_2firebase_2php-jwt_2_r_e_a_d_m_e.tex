\chapter{README}
\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e}{}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e}\index{README@{README}}
 \href{https://packagist.org/packages/firebase/php-jwt}{\texttt{ }} \href{https://packagist.org/packages/firebase/php-jwt}{\texttt{ }} \href{https://packagist.org/packages/firebase/php-jwt}{\texttt{ }}\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5788}{}\doxysection{\texorpdfstring{PHP-\/\+JWT}{PHP-\/\+JWT}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5788}
A simple library to encode and decode JSON Web Tokens (JWT) in PHP, conforming to \href{https://tools.ietf.org/html/rfc7519}{\texttt{ RFC 7519}}.\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5789}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5789}
Use composer to manage your dependencies and download PHP-\/\+JWT\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{composer\ require\ firebase/php-\/jwt}

\end{DoxyCode}


Optionally, install the {\ttfamily paragonie/sodium\+\_\+compat} package from composer if your php is \texorpdfstring{$<$}{<} 7.\+2 or does not have libsodium installed\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{composer\ require\ paragonie/sodium\_compat}

\end{DoxyCode}
\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5790}{}\doxysubsection{\texorpdfstring{Example}{Example}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5790}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_j_w_t}{Firebase\(\backslash\)JWT\(\backslash\)JWT}};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_key}{Firebase\(\backslash\)JWT\(\backslash\)Key}};}
\DoxyCodeLine{}
\DoxyCodeLine{\$key\ =\ \textcolor{stringliteral}{'example\_key'};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}}\ =\ [}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iss'}\ =>\ \textcolor{stringliteral}{'http://example.org'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'aud'}\ =>\ \textcolor{stringliteral}{'http://example.com'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iat'}\ =>\ 1356999524,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'nbf'}\ =>\ 1357000000}
\DoxyCodeLine{];}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}}\ =\ JWT::encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}},\ \$key,\ \textcolor{stringliteral}{'HS256'});}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}}\ =\ JWT::decode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{new}\ Key(\$key,\ \textcolor{stringliteral}{'HS256'}));}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}});}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*}}
\DoxyCodeLine{\textcolor{comment}{\ NOTE:\ This\ will\ now\ be\ an\ object\ instead\ of\ an\ associative\ array.\ To\ get}}
\DoxyCodeLine{\textcolor{comment}{\ an\ associative\ array,\ you\ will\ need\ to\ cast\ it\ as\ such:}}
\DoxyCodeLine{\textcolor{comment}{*/}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded\_array}}\ =\ (array)\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}};}
\DoxyCodeLine{}
\DoxyCodeLine{JWT::\$leeway\ =\ 60;\ \textcolor{comment}{//\ \$leeway\ in\ seconds}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}}\ =\ JWT::decode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{new}\ Key(\$key,\ \textcolor{stringliteral}{'HS256'}));}

\end{DoxyCode}
 \hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5791}{}\doxysubsection{\texorpdfstring{Example with RS256 (openssl)}{Example with RS256 (openssl)}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5791}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_j_w_t}{Firebase\(\backslash\)JWT\(\backslash\)JWT}};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_key}{Firebase\(\backslash\)JWT\(\backslash\)Key}};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}}\ =\ <<<\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{EOD}}}
\DoxyCodeLine{-\/-\/-\/-\/-\/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{BEGIN}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{RSA}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{PRIVATE}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KEY}}-\/-\/-\/-\/-\/}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{MIICXAIBAAKBgQC8kGa1pSjbSYZVebtTRBLxBz5H4i2p}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{llLCrEeQhta5kaQu}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{Rn}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{vuER4W8oDH3}}+3\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{iuIYW4VQAzyqFpwuzjkDI}}+17\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{t5t0tyazyZ8JXw}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KgXTxldMPEL9}}}
\DoxyCodeLine{5+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{qVhgXvwtihXC1c5oGbRlEDvDF6Sa53rcFVsYJ4ehde}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{zUxo6UvS7UrBQIDAQAB}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{AoGAb}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{MXV46XxCFRxNuB8LyAtmLDgi}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{xRnTAlMHjSACddwkyKem8}}\textcolor{comment}{//8eZtw9fzxz}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bWZ}}/1/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{doQOuHBGYZU8aDzzj59FZ78dyzNFoF91hbvZKkg}}+6\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{wGyd}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{LrGVEB}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{Xre0J}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{Nil0GReM2AHDNZUYRv}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{HYJPIOrB0CRczLQsgFJ8K6aAD6F0CQQDzbpjYdx10qgK1}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{cP59UHiHjPZYC0loEsk7s}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{hUmT3QHerAQJMZWC11Qrn2N}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{ybwwNblDKv}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{s5qgMQ5}}}
\DoxyCodeLine{5\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{tNoQ9IfAkEAxkyffU6ythpg}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{H0Ixe1I2rd0GbF05biIzO}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{i77Det3n4YsJVlDck}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{ZkcvY3SK2iRIL4c9yY6hlIhs}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{K9wXTtGWwJBAO9Dskl48mO7woPR9uD22jDpNSwe}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{k90OMepTjzSvlhjbfuPN1IdhqvSJTDychRwn1kIJ7LQZgQ8fVz9OCFZ}}/6\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{qMCQGOb}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{qaGwHmUK6xzpUbbacnYrIM6nLSkXgOAwv7XXCojvY614ILTK3iXiLBOxPu5Eu13k}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{eUz9sHyD6vkgZzjtxXECQAkp4Xerf5TGfQXGXhxIX52yH}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{N2LtujCdkQZjXAsGdm}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{B2zNzvrlgRmgBrklMTrMYgm1NPcW}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{bRLGcwgW2PTvNM}}=}
\DoxyCodeLine{-\/-\/-\/-\/-\/END\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{RSA}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{PRIVATE}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KEY}}-\/-\/-\/-\/-\/}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{EOD}};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}}\ =\ <<<\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{EOD}}}
\DoxyCodeLine{-\/-\/-\/-\/-\/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{BEGIN}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{PUBLIC}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KEY}}-\/-\/-\/-\/-\/}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8kGa1pSjbSYZVebtTRBLxBz5H}}}
\DoxyCodeLine{4\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{i2p}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{llLCrEeQhta5kaQu}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{RnvuER4W8oDH3}}+3\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{iuIYW4VQAzyqFpwuzjkDI}}+17\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{t5t}}}
\DoxyCodeLine{0\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{tyazyZ8JXw}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KgXTxldMPEL95}}+\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{qVhgXvwtihXC1c5oGbRlEDvDF6Sa53rcFVsYJ4}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{ehde}}/\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{zUxo6UvS7UrBQIDAQAB}}}
\DoxyCodeLine{-\/-\/-\/-\/-\/END\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{PUBLIC}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{KEY}}-\/-\/-\/-\/-\/}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{EOD}};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}}\ =\ [}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iss'}\ =>\ \textcolor{stringliteral}{'example.org'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'aud'}\ =>\ \textcolor{stringliteral}{'example.com'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iat'}\ =>\ 1356999524,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'nbf'}\ =>\ 1357000000}
\DoxyCodeLine{];}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}}\ =\ JWT::encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}},\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}},\ \textcolor{stringliteral}{'RS256'});}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Encode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}}\ =\ JWT::decode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{new}\ Key(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}},\ \textcolor{stringliteral}{'RS256'}));}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/*}}
\DoxyCodeLine{\textcolor{comment}{\ NOTE:\ This\ will\ now\ be\ an\ object\ instead\ of\ an\ associative\ array.\ To\ get}}
\DoxyCodeLine{\textcolor{comment}{\ an\ associative\ array,\ you\ will\ need\ to\ cast\ it\ as\ such:}}
\DoxyCodeLine{\textcolor{comment}{*/}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded\_array}}\ =\ (array)\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Decode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded\_array}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}

\end{DoxyCode}
\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5792}{}\doxysubsection{\texorpdfstring{Example with a passphrase}{Example with a passphrase}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5792}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_j_w_t}{Firebase\(\backslash\)JWT\(\backslash\)JWT}};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_key}{Firebase\(\backslash\)JWT\(\backslash\)Key}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Your\ passphrase}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$passphrase}}\ =\ \textcolor{stringliteral}{'[YOUR\_PASSPHRASE]'};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Your\ private\ key\ file\ with\ passphrase}}
\DoxyCodeLine{\textcolor{comment}{//\ Can\ be\ generated\ with\ "{}ssh-\/keygen\ -\/t\ rsa\ -\/m\ pem"{}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKeyFile}}\ =\ \textcolor{stringliteral}{'/path/to/key-\/with-\/passphrase.pem'};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Create\ a\ private\ key\ of\ type\ "{}resource"{}}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}}\ =\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{openssl\_pkey\_get\_private}}(}
\DoxyCodeLine{\ \ \ \ file\_get\_contents(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKeyFile}}),}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$passphrase}}}
\DoxyCodeLine{);}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}}\ =\ [}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iss'}\ =>\ \textcolor{stringliteral}{'example.org'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'aud'}\ =>\ \textcolor{stringliteral}{'example.com'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iat'}\ =>\ 1356999524,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'nbf'}\ =>\ 1357000000}
\DoxyCodeLine{];}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}}\ =\ JWT::encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}},\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}},\ \textcolor{stringliteral}{'RS256'});}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Encode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Get\ public\ key\ from\ the\ private\ key,\ or\ pull\ from\ from\ a\ file.}}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}}\ =\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{openssl\_pkey\_get\_details}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}})[\textcolor{stringliteral}{'key'}];}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}}\ =\ JWT::decode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{new}\ Key(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}},\ \textcolor{stringliteral}{'RS256'}));}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Decode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}((array)\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}

\end{DoxyCode}
\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5793}{}\doxysubsection{\texorpdfstring{Example with Ed\+DSA (libsodium and Ed25519 signature)}{Example with Ed\+DSA (libsodium and Ed25519 signature)}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5793}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_j_w_t}{Firebase\(\backslash\)JWT\(\backslash\)JWT}};}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{use}}\ \mbox{\hyperlink{class_firebase_1_1_j_w_t_1_1_key}{Firebase\(\backslash\)JWT\(\backslash\)Key}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ Public\ and\ private\ keys\ are\ expected\ to\ be\ Base64\ encoded.\ The\ last}}
\DoxyCodeLine{\textcolor{comment}{//\ non-\/empty\ line\ is\ used\ so\ that\ keys\ can\ be\ generated\ with}}
\DoxyCodeLine{\textcolor{comment}{//\ sodium\_crypto\_sign\_keypair().\ The\ secret\ keys\ generated\ by\ other\ tools\ may}}
\DoxyCodeLine{\textcolor{comment}{//\ need\ to\ be\ adjusted\ to\ match\ the\ input\ expected\ by\ libsodium.}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$keyPair}}\ =\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{sodium\_crypto\_sign\_keypair}}();}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}}\ =\ base64\_encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{sodium\_crypto\_sign\_secretkey}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$keyPair}}));}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}}\ =\ base64\_encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{sodium\_crypto\_sign\_publickey}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$keyPair}}));}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}}\ =\ [}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iss'}\ =>\ \textcolor{stringliteral}{'example.org'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'aud'}\ =>\ \textcolor{stringliteral}{'example.com'},}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'iat'}\ =>\ 1356999524,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{'nbf'}\ =>\ 1357000000}
\DoxyCodeLine{];}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}}\ =\ JWT::encode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$payload}},\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$privateKey}},\ \textcolor{stringliteral}{'EdDSA'});}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Encode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}}\ =\ JWT::decode(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$jwt}},\ \textcolor{keyword}{new}\ Key(\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$publicKey}},\ \textcolor{stringliteral}{'EdDSA'}));}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{echo}}\ \textcolor{stringliteral}{"{}Decode:\(\backslash\)n"{}}\ .\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{print\_r}}((array)\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{\$decoded}},\ \textcolor{keyword}{true})\ .\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{\`{}\`{}\`{}\`{}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{Using}}\ \mbox{\hyperlink{report_8contract_8php_a77b973d137fb33212e018b042df6e3e7}{JWKs}}}
\DoxyCodeLine{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}

\end{DoxyCode}
 php use Firebase\textbackslash{}\+JWT\textbackslash{}\+JWK; use Firebase\textbackslash{}\+JWT\textbackslash{}\+JWT;

// Set of keys. The "{}keys"{} key is required. For example, the JSON response to // this endpoint\+: \href{https://www.gstatic.com/iap/verify/public_key-jwk}{\texttt{ https\+://www.\+gstatic.\+com/iap/verify/public\+\_\+key-\/jwk}} \$jwks = \mbox{[}\textquotesingle{}keys\textquotesingle{} =\texorpdfstring{$>$}{>} \mbox{[}\mbox{]}\mbox{]};

// JWK\+::parse\+Key\+Set(\$jwks) returns an associative array of {\bfseries{kid}} to Firebase\textbackslash{}\+JWT\textbackslash{}\+Key // objects. Pass this as the second parameter to JWT\+::decode. JWT\+::decode(\$payload, JWK\+::parse\+Key\+Set(\$jwks)); 
\begin{DoxyCode}{0}
\DoxyCodeLine{Using\ Cached\ Key\ Sets}
\DoxyCodeLine{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}
\DoxyCodeLine{}
\DoxyCodeLine{The\ \`{}CachedKeySet`\ class\ can\ be\ used\ to\ fetch\ and\ cache\ JWKS\ (JSON\ Web\ Key\ Sets)\ from\ a\ public\ URI.}
\DoxyCodeLine{This\ has\ the\ following\ advantages:}
\DoxyCodeLine{}
\DoxyCodeLine{1.\ The\ results\ are\ cached\ for\ performance.}
\DoxyCodeLine{2.\ If\ an\ unrecognized\ key\ is\ requested,\ the\ cache\ is\ refreshed,\ to\ accomodate\ for\ key\ rotation.}
\DoxyCodeLine{3.\ If\ rate\ limiting\ is\ enabled,\ the\ JWKS\ URI\ will\ not\ make\ more\ than\ 10\ requests\ a\ second.}

\end{DoxyCode}
 php use Firebase\textbackslash{}\+JWT\textbackslash{}\+Cached\+Key\+Set; use Firebase\textbackslash{}\+JWT\textbackslash{}\+JWT;

// The URI for the JWKS you wish to cache the results from \$jwks\+Uri = \textquotesingle{}\href{https://www.gstatic.com/iap/verify/public_key-jwk';}{\texttt{ https\+://www.\+gstatic.\+com/iap/verify/public\+\_\+key-\/jwk\textquotesingle{};}}

// Create an HTTP client (can be any PSR-\/7 compatible HTTP client) \$http\+Client = new \doxylink{namespace_guzzle_http}{Guzzle\+Http}\textbackslash{}\+Client();

// Create an HTTP request factory (can be any PSR-\/17 compatible HTTP request factory) \$http\+Factory = new \doxylink{namespace_guzzle_http}{Guzzle\+Http}\textbackslash{}\+Psr\textbackslash{}\+Http\+Factory();

// Create a cache item pool (can be any PSR-\/6 compatible cache item pool) \$cache\+Item\+Pool = Phpfastcache\textbackslash{}\+Cache\+Manager\+::get\+Instance(\textquotesingle{}files\textquotesingle{});

\$key\+Set = new Cached\+Key\+Set( \$jwks\+Uri, \$http\+Client, \$http\+Factory, \$cache\+Item\+Pool, null, // \$expires\+After int seconds to set the JWKS to expire true // \$rate\+Limit true to enable rate limit of 10 RPS on lookup of invalid keys );

\$jwt = \textquotesingle{}ey\+Jhb\+Gci...\textquotesingle{}; // Some JWT signed by a key from the \$jwk\+Uri above \$decoded = JWT\+::decode(\$jwt, \$key\+Set); 
\begin{DoxyCode}{0}
\DoxyCodeLine{Miscellaneous}
\DoxyCodeLine{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}
\DoxyCodeLine{}
\DoxyCodeLine{\#\#\#\#\ Exception\ Handling}
\DoxyCodeLine{}
\DoxyCodeLine{When\ a\ call\ to\ \`{}JWT::decode`\ is\ invalid,\ it\ will\ throw\ one\ of\ the\ following\ exceptions:}

\end{DoxyCode}
 php use Firebase\textbackslash{}\+JWT\textbackslash{}\+JWT; use Firebase\textbackslash{}\+JWT\textbackslash{}\+Signature\+Invalid\+Exception; use Firebase\textbackslash{}\+JWT\textbackslash{}\+Before\+Valid\+Exception; use Firebase\textbackslash{}\+JWT\textbackslash{}\+Expired\+Exception; use Domain\+Exception; use Invalid\+Argument\+Exception; use Unexpected\+Value\+Exception;

try \{ \$decoded = JWT\+::decode(\$payload, \$keys); \} catch (Invalid\+Argument\+Exception \$e) \{ // provided key/key-\/array is empty or malformed. \} catch (Domain\+Exception \$e) \{ // provided algorithm is unsupported OR // provided key is invalid OR // unknown error thrown in open\+SSL or libsodium OR // libsodium is required but not available. \} catch (Signature\+Invalid\+Exception \$e) \{ // provided JWT signature verification failed. \} catch (Before\+Valid\+Exception \$e) \{ // provided JWT is trying to be used before "{}nbf"{} claim OR // provided JWT is trying to be used before "{}iat"{} claim. \} catch (Expired\+Exception \$e) \{ // provided JWT is trying to be used after "{}exp"{} claim. \} catch (Unexpected\+Value\+Exception \$e) \{ // provided JWT is malformed OR // provided JWT is missing an algorithm / using an unsupported algorithm OR // provided JWT algorithm does not match provided key OR // provided key ID in key/key-\/array is empty or invalid. \} 
\begin{DoxyCode}{0}
\DoxyCodeLine{All\ exceptions\ in\ the\ \`{}Firebase\(\backslash\)JWT`\ namespace\ extend\ \`{}UnexpectedValueException`,\ and\ can\ be\ simplified}
\DoxyCodeLine{like\ this:}

\end{DoxyCode}
 php try \{ \$decoded = JWT\+::decode(\$payload, \$keys); \} catch (Logic\+Exception \$e) \{ // errors having to do with environmental setup or malformed JWT Keys \} catch (Unexpected\+Value\+Exception \$e) \{ // errors having to do with JWT signature and claims \} 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#\#\#\#\ Casting\ to\ array}
\DoxyCodeLine{}
\DoxyCodeLine{The\ return\ value\ of\ \`{}JWT::decode`\ is\ the\ generic\ PHP\ object\ \`{}stdClass`.\ If\ you'd\ like\ to\ handle\ with\ arrays}
\DoxyCodeLine{instead,\ you\ can\ do\ the\ following:}

\end{DoxyCode}
 php // return type is std\+Class \$decoded = JWT\+::decode(\$payload, \$keys);

// cast to array \$decoded = json\+\_\+decode(json\+\_\+encode(\$decoded), true); 
\begin{DoxyCode}{0}
\DoxyCodeLine{Tests}
\DoxyCodeLine{-\/-\/-\/-\/-\/}
\DoxyCodeLine{Run\ the\ tests\ using\ phpunit:}

\end{DoxyCode}
 bash \$ pear install PHPUnit \$ phpunit --configuration phpunit.\+xml.\+dist PHPUnit 3.\+7.\+10 by Sebastian Bergmann. ..... Time\+: 0 seconds, Memory\+: 2.\+50\+Mb OK (5 tests, 5 assertions) \`{}\`{}\`{}\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5794}{}\doxysubsection{\texorpdfstring{New Lines in private keys}{New Lines in private keys}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5794}
If your private key contains {\ttfamily \textbackslash{}n} characters, be sure to wrap it in double quotes {\ttfamily "{}"{}} and not single quotes `'\textquotesingle{}\`{} in order to properly interpret the escaped characters.\hypertarget{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5795}{}\doxysubsection{\texorpdfstring{License}{License}}\label{md_public_2glpi_2vendor_2firebase_2php-jwt_2_r_e_a_d_m_e_autotoc_md5795}
\href{http://opensource.org/licenses/BSD-3-Clause}{\texttt{ 3-\/Clause BSD}}. 